import proc printf from wasi;

/*
//entrypoint proc
export proc main {
    call add;
};

export proc add {
    iadd a0, 1, a1;
    isub a2, 3, a3;

    jumpif a0, branch;
        iadd a0, a1, a2;
        return;
    branch: 
        nullop;
};
*/

//
//hello, world
/*

proc : 
     | export proc identifier { instructions };
     | import proc identifier from identifier;

*/

//entrypoint procedure
main:
    iadd 3, 5, c0;
    isub c0, 3, c1;

    move a0, 10;
    move a1, 5;
    call add;

    move a0, 3;
    move a1, 6;
    call sub;
    move a6, a7;

    move c0, 0b10000000;
    move c1, 0b01000000;

    //call recurse;
    imp3;
    imp2;

    //zyteware::syscall
    imp3 0x07;

    break;

    move c0, 0;
    jumpif c0, 0xdeadbeef;

    call panic;

    return;

add: 
    iadd a0, a1, a7;
    return;

sub: 
    isub a0, a1, a7;
    return;

recurse:
    call recurse;
    return;

//terminates execution
panic: 
    move a7, 69;
    isub a7, 3, a7;
    idiv a7, 2, a7;
    nullop;

    unreachable;